---
import { getCollection } from 'astro:content';
import Layout from '../components/Layout.astro';
import {
  GITHUB_PROFILE_LINK,
  LINKEDIN_PROFILE_LINK,
  MAIL_PROFILE_LINK,
} from '../consts';

// Get latest blog posts
const allPosts = await getCollection('posts');
const latestPosts = allPosts
  .sort((a, b) => b.data.pubDate.getTime() - a.data.pubDate.getTime())
  .slice(0, 3);

// Skills/expertise areas based on real experience
const expertise = [
  {
    category: 'Frontend Core',
    skills: ['React', 'TypeScript', 'JavaScript', 'Next.js', 'Vue.js'],
  },
  {
    category: 'Architecture & DX',
    skills: ['Frontend Architecture', 'Performance', 'CI/CD', 'Testing', 'Webpack'],
  },
  {
    category: 'Full-Stack',
    skills: ['Node.js', 'GraphQL', 'REST APIs', 'PHP', 'SQL'],
  },
  {
    category: 'Tools & Practices',
    skills: ['Git', 'Docker', 'Agile', 'Code Review', 'Remote Teams'],
  },
];

// Real projects/achievements based on experience
const projects = [
  {
    title: 'SaaS Platform Frontend',
    description: 'Leading frontend development for a complex, long-living SaaS platform at Apliteni. Focus on performance optimization, clean architecture, and developer experience improvements.',
    tags: ['React', 'TypeScript', 'Performance', 'Architecture'],
    metrics: '4+ years of continuous development',
  },
  {
    title: 'GraphQL Backend & Client Apps',
    description: 'Led the development of an Apollo GraphQL server and created multiple client applications using Nuxt.js framework at ConstLab.',
    tags: ['GraphQL', 'Apollo', 'Nuxt.js', 'Node.js'],
    metrics: 'Full-stack architecture ownership',
  },
  {
    title: 'Legacy Frontend Migration',
    description: 'Migrated legacy frontends to modern React/TypeScript stack, introduced CI/CD automation to speed up development cycles.',
    tags: ['React', 'TypeScript', 'CI/CD', 'Migration'],
    metrics: 'Streamlined dev workflows',
  },
];

// Calculate years of experience (started May 2010)
const startYear = 2010;
const yearsExperience = new Date().getFullYear() - startYear;
---

<Layout>
  <!-- Hero Section -->
  <section class="relative min-h-[90vh] flex items-center grid-pattern">
    <div class="container py-24 md:py-32">
      <div class="max-w-4xl">
        <!-- Status Badge -->
        <div class="animate-in mb-8">
          <span class="inline-flex items-center gap-2 px-3 py-1.5 rounded-full border border-line bg-surface text-xs font-mono text-foreground-secondary">
            <span class="w-1.5 h-1.5 rounded-full bg-accent status-available"></span>
            Available for new opportunities
          </span>
        </div>

        <!-- Main Headline -->
        <h1 class="animate-in animate-in-delay-1 text-foreground mb-6">
          Senior Frontend Engineer
          <span class="block text-foreground-tertiary">React, TypeScript, Full-Stack Background</span>
        </h1>

        <!-- Value Proposition -->
        <p class="animate-in animate-in-delay-2 text-lg md:text-xl text-foreground-secondary leading-relaxed max-w-2xl mb-8">
          I build scalable, high-performance web applications with a focus on
          <span class="text-foreground font-medium">clean architecture</span>,
          <span class="text-foreground font-medium">developer experience</span>, and
          <span class="text-foreground font-medium">product impact</span>.
          Full-stack background helps me design better frontend solutions.
        </p>

        <!-- Quick Stats -->
        <div class="animate-in animate-in-delay-3 flex flex-wrap gap-8 mb-10 font-mono text-sm">
          <div>
            <span class="text-accent text-2xl font-semibold">{yearsExperience}+</span>
            <span class="block text-foreground-tertiary mt-1">Years Experience</span>
          </div>
          <div>
            <span class="text-accent text-2xl font-semibold">SaaS</span>
            <span class="block text-foreground-tertiary mt-1">Platform Focus</span>
          </div>
          <div>
            <span class="text-accent text-2xl font-semibold">Remote</span>
            <span class="block text-foreground-tertiary mt-1">International Teams</span>
          </div>
        </div>

        <!-- CTAs -->
        <div class="animate-in animate-in-delay-4 flex flex-wrap gap-4">
          <a href="#contact" class="btn-primary">
            Get in touch
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/>
            </svg>
          </a>
          <a href="#projects" class="btn-secondary">
            View experience
          </a>
        </div>
      </div>
    </div>

    <!-- Scroll indicator -->
    <div class="absolute bottom-8 left-1/2 -translate-x-1/2 animate-in animate-in-delay-5">
      <div class="flex flex-col items-center gap-2 text-foreground-tertiary">
        <span class="text-xs font-mono uppercase tracking-wider">Scroll</span>
        <svg class="w-4 h-4 animate-bounce" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M19 14l-7 7m0 0l-7-7m7 7V3"/>
        </svg>
      </div>
    </div>
  </section>

  <!-- About / Expertise Section -->
  <section id="about" class="py-24 md:py-32 bg-background-subtle">
    <div class="container">
      <div class="grid grid-cols-1 lg:grid-cols-12 gap-16">
        <!-- Left Column: About -->
        <div class="lg:col-span-5">
          <span class="section-label mb-6">01 — About</span>
          <h2 class="text-foreground mb-6">
            Engineering with purpose
          </h2>
          <div class="space-y-4 text-foreground-secondary">
            <p>
              I'm a Senior Frontend Engineer with {yearsExperience}+ years of experience
              building scalable, high-performance web applications using React,
              TypeScript, and modern frontend tooling.
            </p>
            <p>
              I combine strong UI engineering skills with a solid full-stack
              background (Node.js, PHP, SQL), which helps me design clean
              architectures, improve developer experience, and collaborate
              effectively with backend teams.
            </p>
            <p>
              I've worked on complex, long-living SaaS platforms, improved
              performance, built internal tools, migrated legacy frontends, and
              introduced CI/CD automation to speed up development cycles.
            </p>
            <p>
              Based in <span class="text-foreground">Batumi, Georgia</span>. Working with
              international remote teams.
            </p>
          </div>
        </div>

        <!-- Right Column: Expertise Grid -->
        <div class="lg:col-span-7">
          <span class="section-label mb-6">02 — Expertise</span>
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
            {expertise.map((area) => (
              <div class="card p-6">
                <h3 class="font-display font-semibold text-foreground mb-4">
                  {area.category}
                </h3>
                <div class="flex flex-wrap gap-2">
                  {area.skills.map((skill) => (
                    <span class="tag">{skill}</span>
                  ))}
                </div>
              </div>
            ))}
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Experience/Projects Section -->
  <section id="projects" class="py-24 md:py-32">
    <div class="container">
      <div class="flex flex-col md:flex-row md:items-end md:justify-between gap-6 mb-12">
        <div>
          <span class="section-label mb-6">03 — Experience</span>
          <h2 class="text-foreground">
            Selected work
          </h2>
        </div>
        <a
          href={GITHUB_PROFILE_LINK}
          target="_blank"
          rel="noopener noreferrer"
          class="link-underline text-sm inline-flex items-center gap-2"
        >
          View GitHub profile
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"/>
          </svg>
        </a>
      </div>

      <div class="space-y-6">
        {projects.map((project, index) => (
          <article class="card group">
            <div class="p-6 md:p-8">
              <div class="grid grid-cols-1 lg:grid-cols-12 gap-6 lg:gap-8">
                <!-- Project Number -->
                <div class="lg:col-span-1">
                  <span class="font-mono text-sm text-foreground-tertiary">
                    0{index + 1}
                  </span>
                </div>

                <!-- Project Content -->
                <div class="lg:col-span-7">
                  <h3 class="font-display font-semibold text-xl text-foreground mb-3 group-hover:text-accent transition-colors">
                    {project.title}
                  </h3>
                  <p class="text-foreground-secondary mb-4">
                    {project.description}
                  </p>
                  <div class="flex flex-wrap gap-2">
                    {project.tags.map((tag) => (
                      <span class="tag">{tag}</span>
                    ))}
                  </div>
                </div>

                <!-- Project Metrics -->
                <div class="lg:col-span-4 lg:text-right">
                  <span class="inline-flex items-center gap-2 text-accent font-mono text-sm">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"/>
                    </svg>
                    {project.metrics}
                  </span>
                </div>
              </div>
            </div>
          </article>
        ))}
      </div>

      <!-- Work History Summary -->
      <div class="mt-16 pt-12 border-t border-line">
        <h3 class="font-display font-semibold text-lg text-foreground mb-8">Work History</h3>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
          <div class="space-y-6">
            <div>
              <div class="flex items-center justify-between mb-1">
                <span class="font-medium text-foreground">Apliteni OÜ</span>
                <span class="font-mono text-xs text-foreground-tertiary">2020 — Present</span>
              </div>
              <p class="text-sm text-foreground-secondary">Senior Frontend Developer</p>
            </div>
            <div>
              <div class="flex items-center justify-between mb-1">
                <span class="font-medium text-foreground">AG.digital</span>
                <span class="font-mono text-xs text-foreground-tertiary">2020</span>
              </div>
              <p class="text-sm text-foreground-secondary">Senior Software Engineer</p>
            </div>
          </div>
          <div class="space-y-6">
            <div>
              <div class="flex items-center justify-between mb-1">
                <span class="font-medium text-foreground">ConstLab, LLC</span>
                <span class="font-mono text-xs text-foreground-tertiary">2014 — 2020</span>
              </div>
              <p class="text-sm text-foreground-secondary">Full-stack Developer</p>
            </div>
            <div>
              <div class="flex items-center justify-between mb-1">
                <span class="font-medium text-foreground">BSGroup</span>
                <span class="font-mono text-xs text-foreground-tertiary">2010 — 2014</span>
              </div>
              <p class="text-sm text-foreground-secondary">Full-stack Developer</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Blog Section -->
  <section id="blog" class="py-24 md:py-32 bg-background-subtle">
    <div class="container">
      <div class="flex flex-col md:flex-row md:items-end md:justify-between gap-6 mb-12">
        <div>
          <span class="section-label mb-6">04 — Writing</span>
          <h2 class="text-foreground">
            Latest articles
          </h2>
        </div>
        <a href="/blog" class="link-underline text-sm inline-flex items-center gap-2">
          View all posts
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M17 8l4 4m0 0l-4 4m4-4H3"/>
          </svg>
        </a>
      </div>

      {latestPosts.length > 0 ? (
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          {latestPosts.map((post) => (
            <article class="card group">
              <a href={`/blog/${post.id}`} class="block p-6">
                <div class="flex flex-wrap gap-2 mb-4">
                  {post.data.tags.slice(0, 2).map((tag: string) => (
                    <span class="tag">{tag}</span>
                  ))}
                </div>
                <h3 class="font-display font-semibold text-lg text-foreground mb-3 group-hover:text-accent transition-colors">
                  {post.data.title}
                </h3>
                <p class="text-sm text-foreground-secondary line-clamp-2 mb-4">
                  {post.data.description}
                </p>
                <time class="text-xs font-mono text-foreground-tertiary">
                  {post.data.pubDate.toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'short',
                    day: 'numeric'
                  })}
                </time>
              </a>
            </article>
          ))}
        </div>
      ) : (
        <div class="card p-12 text-center">
          <p class="text-foreground-secondary">
            Articles coming soon. In the meantime, check out my{' '}
            <a href={GITHUB_PROFILE_LINK} class="text-accent hover:underline" target="_blank" rel="noopener noreferrer">
              GitHub
            </a>{' '}
            for open source contributions.
          </p>
        </div>
      )}
    </div>
  </section>

  <!-- Contact Section -->
  <section id="contact" class="py-24 md:py-32">
    <div class="container">
      <div class="max-w-3xl mx-auto text-center">
        <span class="section-label justify-center mb-6">05 — Contact</span>
        <h2 class="text-foreground mb-6">
          Let's work together
        </h2>
        <p class="text-lg text-foreground-secondary mb-10 max-w-xl mx-auto">
          I enjoy working in international remote teams and delivering reliable UI.
          Open to new opportunities and interesting projects.
        </p>

        <div class="flex flex-col sm:flex-row items-center justify-center gap-4 mb-12">
          <a href={`mailto:${MAIL_PROFILE_LINK}`} class="btn-primary">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
            </svg>
            Send me an email
          </a>
          <a
            href={LINKEDIN_PROFILE_LINK}
            target="_blank"
            rel="noopener noreferrer"
            class="btn-secondary"
          >
            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
              <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
            </svg>
            Connect on LinkedIn
          </a>
        </div>

        <!-- Email directly displayed -->
        <p class="font-mono text-sm text-foreground-tertiary">
          Or reach out directly at{' '}
          <a href={`mailto:${MAIL_PROFILE_LINK}`} class="text-accent hover:underline">
            {MAIL_PROFILE_LINK}
          </a>
        </p>
      </div>
    </div>
  </section>
</Layout>

<style>
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>
